<!doctype html>
<html lang="en" ng-app="myApp">
<head>
    <meta charset="utf-8">
    <title>Library Prototype</title>
    <link rel="stylesheet" href="css/app.css"/>
    <link rel="stylesheet" href="css/sprites.css"/>

    <script src="lib/jquery-2.0.3.min.js"></script>
    <script src="lib/jquery.fittext.js"></script>
    <script src="lib/jquery-ui.js"></script>
    
    <!-- battle engine related stuff. -->
    <script src="js/BattleEngine.js"></script>
    <script src="js/BattleEngineStateInitial.js"></script>
    <script src="js/BattleEngineStateRun.js"></script>
    <script src="js/BattleEngineStateEnd.js"></script>

    <script src="js/Character.js"></script>
    <script src="js/CharacterStateAlive.js"></script>
    <script src="js/CharacterStateDead.js"></script>

    <!-- cinematics related stuff. -->
    <script src="js/CinematicsEngine.js"></script>
    <script src="js/cinematics/intro/Intro00.js"></script>
    <script src="js/cinematics/intro/Intro01.js"></script>
    <script src="js/cinematics/intro/Intro02.js"></script>
    <script src="js/cinematics/intro/Intro03.js"></script>
    <script src="js/cinematics/intro/Intro04.js"></script>
    
    <script src="js/cinematics/StageView.js"></script>
    <script src="js/cinematics/StageViewStateZeroCharacters.js"></script>
    <script src="js/cinematics/StageViewStateOneCharacter.js"></script>
    <script src="js/cinematics/StageViewStateTwoCharacters.js"></script>
    
    <script src="js/cinematics/CharacterView.js"></script>
    
    <script src="js/cinematics/DialogBoxView.js"></script>
    <script src="js/cinematics/DialogBoxViewStateEmptyText.js"></script>
    <script src="js/cinematics/DialogBoxViewStateFullText.js"></script>
    <script src="js/cinematics/DialogBoxViewStateShowText.js"></script>
</head>

<body>
    <script>
    /*
        var group01 = [ new Character( "01" ), new Character( "02" ) ];
        var group02 = [ new Character( "03" ), new Character( "04" ) ];
        var engine = new BattleEngine( group01, group02 );

        while( engine.state.name != "END" )
        {
            engine.execute();
        };
        
        engine.state.execute( null );
        */

    </script>
    
    <!-- invisible block to be used as a container element for summoned characters. -->
    <div id="spawnArea"></div>
    
    <!-- visible area of the application. scales with the screen size keeping the same aspect ratio. -->
    <div id="visibleArea" style="width: 100%; height: 100%;">
        <!-- temporary filling -->
        <div style="width: 100%; height: 5%; background-color: gray;"></div>
        
        <!-- area where characters are summoned -->
        <div id="stage"></div>
        
        <!-- temporary filling -->
        <div style="width: 100%; height: 5%; background-color: gray;"></div>
        
        <!-- the dialog box -->
        <div id="dialogBox" style="width: 100%; height: 25%; background-color: blue;"></div>
        
        <!-- temporary filling -->
        <div style="width: 100%; height: 5%; background-color: gray;"></div>
    </div>
    
    <!-- script that enables the visible area resizing. -->
    <script>
        var resizeFunction = function () {         
            $("#visibleArea").each(function(){
            var h = $(window).height();
            var w = $(window).width();
            
            if( h * 0.6 < w )
            {
                $(this).css("width", h * 0.6 + "px" );
                $(this).css("height", h + "px");
            } 
            else
            {
                $(this).css("width", w + "px");
                $(this).css("height", w * 1.66666667 + "px" );
            }
            
            }); 
        };
    
        // on window resize, rescale the visible area.
        $(window).resize( resizeFunction );
        
        // resize visible area to the current screen size.
        resizeFunction();
        
        // turn text in the visible area aspect ratio constant.
        $("#visibleArea").fitText(1.2);
        
        // run intro00.
        var ce = new CinematicsEngine( new Intro00() );
        ce.execute();
    </script>
<!--
    <div id="main_view" ng-view ng-cloak></div>
    
    <div>Angular seed app: v<span app-version></span></div>
-->
    <!-- In production use:
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.0.7/angular.min.js"></script>
    -->
<!--
    <script src="lib/angular/angular.js"></script>
    <script src="js/app.js"></script>
    <script src="js/services.js"></script>
    <script src="js/controllers.js"></script>
    <script src="js/filters.js"></script>
    <script src="js/directives.js"></script>
-->

</body>
</html>
